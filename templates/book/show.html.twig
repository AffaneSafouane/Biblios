{% extends 'base.html.twig' %}

{% set page_title = book is null ? 'Livre inconnu' : book.title %}

{% block title %}{{ page_title }}{% endblock %}

{% block body %}
	<section class="py-5">
		{% if book is not null %}
			<div class="container px-4 px-lg-5 my-5">
				<div class="row gx-4 gx-lg-5 align-items-center">
					<div class="col-md-6">
						<img class="card-img-top mb-5 mb-md-0" src="{{ book.cover }}" alt="Première de couverture du livre {{ page_title }}"/>
					</div>
					<div class="col-md-6">
						<div class="small mb-1">ISBN:
							{{ book.isbn }}</div>
						<h1 class="display-5 fw-bolder">{{ page_title }}</h1>
						<div class="fs-5">
							<span>Auteur(s): {{ book.authors|map(a => a.name)|join(', ') }}</span>
                        </div>
                        <div class="fs-5">
                            <span>Éditeur: {{ book.editor.name }}</span>
                        </div>
                        <div class="fs-5">
							<span>{{ book.pageNumber }}{{ book.pageNumber is not null ? ' pages' }} - {{ book.editedAt|date('d M Y') }}</span>
                        </div>
                        <div class="fs-5 mb-5">
                            <span>Status: {{ book.status.getLabel() }}</span>
						</div>
						<p class="lead">{{ book.plot }}</p>
                        <div class="d-flex mb-5">
                            <a href="{{ path('app_book') }}" class="btn btn-dark btn-outline-ligth flex-shrink-0">
                                <i class="bi-cart-fill me-1">Retour à la liste</i>
                            </a>
                        </div>
						<div>
							<h2>Commentaire(s): </h2>
							<ul class="list-group-item">
								{% for comment in comments|slice(0, 2) %}
									<li class="list-group-item text-white mb-3">{{ comment.content|nl2br }}</li>
								{% else %}
									<li class="list-group-item text-white mb-3">Aucun commentaires</li>
									{% if app.user %}
										<a href="{{ path('app_comment_new', {id: book.id}) }}" class="btn btn-primary">Ajouter un commentaire</a>
									{% endif %}
								{% endfor %}
							</ul>
							{% if comments|length > 0 %}
								<a href="{{ path('app_comment_index', {id: book.id}) }}">Voir plus</a>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		{% else %}
			<div>Livre non trouvé</div>
		{% endif %}
	</section>
{% endblock %}
